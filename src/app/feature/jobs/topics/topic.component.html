<div class="table-content px-3">
  <div
    class="d-flex justify-content-between job_header bg-white py-3 px-3 align-items-center"
  >
    <div class="position-relative" style="width: 30%">
      <i class="pi pi-search position-absolute" style="top: 28%; left: 2%"></i>
      <input
        id="name"
        type="search"
        class="form-control_search"
        placeholder="Search Topics"
        (input)="filterJobs($event)"
      />
    </div>
    <div class="d-flex gap-2">
      <div class="p-field">
        <p-dropdown
          [options]="gradeOptions"
          placeholder="Select grade"
          (onChange)="onDropdownChange($event, 'grade')"
        ></p-dropdown>
      </div>
      <div class="p-field">
        <p-dropdown
          [options]="subjectOptions"
          placeholder="Select Subject"
          (onChange)="onDropdownChange($event, 'subject')"
        ></p-dropdown>
      </div>

      <div class="p-field">
        <p-dropdown
          [options]="dropdownOptions"
          placeholder="Select Topic"
          (onChange)="onDropdownChange($event, 'topic')"
        ></p-dropdown>
      </div>
      <button class="btn" (click)="showDialog('add')">GENERATE CONTENT</button>
    </div>
  </div>
  <div class="mt-4">
    <div class="cols" *ngIf="filtered_topics?.length > 0; else noJobsTemplate">
      <div class="item" *ngFor="let data of filtered_topics">
        <div class="card py-3 px-4" style="position: relative">
          <div class="row">
            <div class="col-md-12 pb-3">
              <div class="d-flex justify-content-between">
                <div class="card-text">
                  <strong style="font-size: 20px">{{ data?.topic }}</strong>
                </div>
                <div class="dropdown">
                  <p-menu
                    #menu
                    [popup]="true"
                    class="custom_menu_dropdown"
                    [model]="items"
                    [data]="data"
                  ></p-menu>
                  <i
                    class="pi pi-ellipsis-v"
                    (click)="menu.toggle($event); gettingdata(data)"
                  ></i>
                </div>
              </div>
            </div>
            <div class="col-md-12 mb-4">
              <div class="card-description">
                <div class="mb-4">
                  <div *ngIf="!data.showFullIntroduction">
                    {{
                      data?.lesson_content?.Introduction ||
                        data?.lesson_content
                    }}...
                    <a
                      class="viewmore"
                      href="#"
                      (click)="openContentModal('edit', data)"
                      >View more</a
                    >
                  </div>
                </div>
                <div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <ng-template #noJobsTemplate>
      <div
        class="no-jobs-found d-flex justify-content-center align-items-center"
        style="height: 50vh"
      >
        <h3>No matching Topics found</h3>
      </div>
    </ng-template>
    <app-addeditmodal
      [mode]="modalMode"
      [data]="modalData"
      [(visible)]="isModalVisible"
      (close)="handleModalClose()"
    ></app-addeditmodal>
    <app-details-modal
      [mode]="modalMode"
      [data]="modalData"
      [(visible)]="isDetailModalVisible"
      (close)="handleModalClose()"
    ></app-details-modal>
  </div>
</div>
